{% load static %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.88.1">
  <title>Dashboard</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/dashboard/">



  <!-- Bootstrap core CSS -->
  <!-- <link href="/docs/5.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>


  <!-- Favicons -->
  <link rel="apple-touch-icon" href="/docs/5.1/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <!-- <link rel="manifest" href="/docs/5.1/assets/img/favicons/manifest.json"> -->
  <link rel="mask-icon" href="/docs/5.1/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
  <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon.ico">
  <meta name="theme-color" content="#7952b3">


  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


  <!-- Custom styles for this template -->
  <!-- <link href="dashboard.css" rel="stylesheet"> -->

  <!-- google fonts  -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,300;0,400;0,600;0,700;0,800;0,900;1,500&family=Ubuntu:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- bootstrap and css code -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'styles.css'%}">

  <!-- fontawesome script -->
  <script src="https://kit.fontawesome.com/a37f5837a7.js" crossorigin="anonymous"></script>

  <!-- bootstrap scrit -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>







  <link rel="stylesheet" href="{% static 'dashboard_styles.css'%}">
</head>

<body>
	<script>
        $(document).ready(function(){
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [{% for i in x %}'{{i}}',{% endfor %}],
                    datasets: [{
                        label: 'Number of times droesiness detected',
                        data: [{% for i in y %}'{{i}}',{% endfor %}],
                        
                        backgroundColor: "rgba(27, 113, 250, 0.2)", //version >2 useus background color
                        borderColor: "rgba(3, 63, 158, 1)",
                        borderWidth: 1,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        yAxes: [{
                            ticks:{
                                beginAtZero: true,
                                stepSize: 1
                            }
                        }],
                        
                        xAxes: [{
                            barPercentage: 0.5,
                            categoryPercentage: 1,
                        }]
                    },
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Drowsiness History per User'
                    }
                }
            });
            const ctx1 = document.getElementById('myChart1').getContext('2d');
            const myChart1 = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: [{% for i in x1 %}'{{i}}',{% endfor %}],
                    datasets: [{
                        label: 'Drowsiness Detected ',
                        data: [{% for i in y1 %}'{{i}}',{% endfor %}],
                        borderColor: "#3e95cd",
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        yAxes: [{
                            ticks:{
                                beginAtZero: true,
                                stepSize: 1
                            }
                        }],
                    },
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Drowsiness History by date'
                    }
                }
            });
            const ctx2 = document.getElementById('myChart2').getContext('2d');
            const myChart2=new Chart(ctx2, {
                type: 'pie',
                data: {
                  labels: [{% for i in x2 %}'{{i}}',{% endfor %}],
                  datasets: [{
                    label: "Population (millions)",
                    backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
                    data: [{% for i in y2 %}'{{i}}',{% endfor %}]
                  }]
                },
                options: {
                  title: {
                    display: true,
                    text: 'Drowsiness Detection Time'
                  }
                }
            });
        });
    </script>
  <section id="title">

    <div class='container-fluid-title'>

      <!-- Nav Bar -->
      <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <a class="navbar-brand" href="{% url 'home'%}">SRSS</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            {% if user.is_authenticated and user.is_superuser%}
              <li class="nav-item">
                <li class="nav-link">Hello, {{user.first_name}}</li>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'generate_hist'%}">Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
              </li>
            {% elif user.is_authenticated %}
              <li class="nav-item">
                <li class="nav-link">Hello, {{user.first_name}}</li>
              </li>
              <!-- <li class="nav-item">
                <a href="{% url 'detect_drowsiness'%}">Detect Drowsiness</a><br>
              </li> -->
              <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
              </li>
            {% else %}
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'register' %}">Register</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'login' %}">Login</a>
              </li>
              <!-- <li class="nav-item">
                <a class="nav-link" href="#">Dashboard</a>
              </li> -->
            {% endif %}
          </ul>
        </div>
      </nav>



  </section>

  <div>
    <div class="row">
      <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
        <div class="position-sticky pt-3">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">
                <span data-feather="home"></span>
                Dashboard
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="#myChart">
                <span data-feather="users"></span>Drowsiness History Per User
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#myChart1">
                <span data-feather="bar-chart-2"></span>
                Drowsiness History By Date
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#myChart2">
                <span data-feather="layers"></span>
                Drowsiness Detection Time
              </a>
            </li>
          </ul>

        </div>
      </nav>

    {% if request.user.is_superuser %}
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Dashboard</h1>
        </div>

        <h2>Drowsiness History Per User</h2>

        <canvas  class="my-4 w-100 " id='myChart'  width="900" height="380"></canvas>

        <h2>Drowsiness History By Date</h2>
          <canvas  class="my-4 w-100" id = 'myChart1'  width="900" height="380"></canvas>

        <h2>Drowsiness Detection Time</h2>
            <canvas class="my-4 w-100" id = 'myChart2'  width="900" height="380"></canvas>

      </main>
    {% else %}
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Dashboard</h1>
          </div>
          <img width="200px" height="200px" src="{% static 'red-cross.png'%}" alt="" srcset="">
          <h1 class="h2">Admin Access required</h1>
        </main>
    {% endif %}
    </div>
  </div>


  <!-- <script src="/docs/5.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->

  <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
  <script src="{% static 'dashboard.js'%}"></script>
</body>

</html>
